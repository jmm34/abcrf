{
    "collab_server" : "",
    "contents" : "err.regAbcrf <- function(object, training, paral=FALSE, ncores= if(paral) max(detectCores()-1,1) else 1)\n{\n  if (!inherits(training, \"data.frame\"))\n    stop(\"training needs to be a data.frame object\")\n  if ( (!is.logical(paral)) && (length(paral) != 1L) )\n    stop(\"paral should be TRUE or FALSE\")\n  if(ncores > detectCores() || ncores < 1)\n    stop(\"incorrect number of CPU cores\")\n  \n  ntrain <- nrow(training)\n  \n  mf <- match.call(expand.dots=FALSE)\n  mf <- mf[1]\n  mf$formula <- object$formula\n  mf$data <- training\n  mf[[1L]] <- as.name(\"model.frame\")\n  mf <- eval(mf, parent.frame() )\n  mt <- attr(mf, \"terms\")\n  resp <- model.response(mf)\n  \n  inbag <- matrix(unlist(object$model.rf$inbag.counts, use.names=FALSE), ncol=object$model.rf$num.trees, byrow=FALSE)\n  \n  pred <- predict(object$model.rf, training, predict.all=TRUE , num.threads=ncores)$predictions\n  \n  if (object$model.rf$num.trees < 40) stop(\"the number of trees in the forest should be greater than 40\")\n  sequo <- seq(40,object$model.rf$num.trees, length.out = 20)\n  \n  res <- rep(0,length(sequo))\n  h <- 0\n  pb=txtProgressBar(min=0,max=length(sequo),style=3)\n  for (j in sequo) \n  {\n    mama <- rep(NA,ntrain)\n    for (i in 1:ntrain) \n    {\n      outbag <- (1:j)[inbag[i,1:j]==0]\n      if (length(outbag)>0) mama[i] <- mean(pred[i,outbag])\n    }\n    h <- h+1\n    res[h] <- mean((mama-resp)^2)\n    setTxtProgressBar(pb,h)\n  }\n  close(pb)\n  \n  plot(sequo,res,ylab=\"out-of-bag mean squared error\",xlab=\"Number of trees\",type=\"l\")\n  cbind(ntree=floor(sequo), oob_mse=res)\n}\n",
    "created" : 1480328583904.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "3199505101",
    "id" : "D7297537",
    "lastKnownWriteTime" : 1480358332,
    "last_content_update" : 1480358330293,
    "path" : "E:/These/abcrf 1.4 avec ranger/abcrf_1.4/R/err.regAbcrf.R",
    "project_path" : "R/err.regAbcrf.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 5,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}